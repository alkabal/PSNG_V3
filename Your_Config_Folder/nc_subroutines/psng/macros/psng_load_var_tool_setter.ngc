o<psng_load_var_tool_setter> sub

; this file is call by all related move for TOOL-SETTER

#<_psng_probe_number>         = #<_hal[probe.probe_number]>
#<_psng_tool_diam>            = #<_hal[halui.tool.diameter]>

#<_psng_vel_for_travel>       = #<_hal[probe.ts_vel_for_travel]>
#<_psng_vel_for_search>       = #<_hal[probe.ts_vel_for_search]>
#<_psng_vel_for_probe>        = #<_hal[probe.ts_vel_for_probe]>
#<_psng_maxprobe_z>           = #<_hal[probe.ts_maxprobe_z]>
#<_psng_maxprobe_xy>          = #<_hal[probe.ts_maxprobe_xy]>
#<_psng_latch>                = #<_hal[probe.ts_latch]>
#<_psng_latch_maxprobe>       = #<_hal[probe.ts_latch_maxprobe]>
#<_psng_clearance_z>          = #<_hal[probe.ts_clearance_z]>
#<_psng_clearance_xy>         = #<_hal[probe.ts_clearance_xy]>

#<_psng_ts_pos_x>             = #<_hal[probe.ts_pos_x]>
#<_psng_ts_pos_y>             = #<_hal[probe.ts_pos_y]>
#<_psng_ts_pos_z>             = #<_hal[probe.ts_pos_z]>
#<_psng_ts_height>            = #<_hal[probe.ts_height]>    ; Using ts_height allow to use default ini value or altered value from PSNG GUI
#<_psng_ts_diam_ext>          = #<_hal[probe.ts_diam_ext]>
#<_psng_ts_diam_offset>       = #<_hal[probe.ts_diam_offset]>
#<_psng_ts_diam_hole>         = #<_hal[probe.ts_diam_hole]>
#<_psng_ts_rot_speed>         = #<_hal[probe.ts_rot_speed]>


M160    ;o<clear-axis-info> call


o10 if [#<_psng_tool_diam> LE 0]
    (ABORT,TOOLSETTER DIAMETER MISSING FROM TOOLTABLE)
o10 endif

o20 if [#<_psng_vel_for_travel> LE 0]
    (ABORT,TOOLSETTER TRAVEL VELOCITY NOT CONFIGURED)
o20 endif

o30 if [#<_psng_vel_for_search> LE 0]
    (ABORT,TOOLSETTER SEARCH VELOCITY NOT CONFIGURED)
o30 endif
o31 if [#<_psng_vel_for_probe> GE #<_psng_vel_for_travel>]
    (ABORT,TOOLSETTER SEARCH VELOCITY iS MORE OR EQUAL TO PROBE TRAVEL VELOCITY)
o31 endif

o40 if [#<_psng_vel_for_probe> LE 0]
    (ABORT,TOOLSETTER VELOCITY NOT CONFIGURED)
o40 endif
o41 if [#<_psng_vel_for_probe> GE #<_psng_vel_for_search>]
    (ABORT,TOOLSETTER VELOCITY iS MORE OR EQUAL TO PROBE SEARCH VELOCITY)
o41 endif

o50 if [#<_psng_maxprobe_z> LE 0]
    (ABORT,TOOLSETTER MAX NOT CONFIGURED)
o50 endif

o60 if [#<_psng_maxprobe_xy> LE 0]
    (ABORT,TOOLSETTER MAX NOT CONFIGURED)
o60 endif

o70 if [#<_psng_latch>  LE 0]
    (ABORT,TOOLSETTER LATCH NOT CONFIGURED)
o70 endif

o80 if [#<_psng_latch_maxprobe> LT 0]
    (ABORT,TOOLSETTER LATCH NOT CONFIGURED)
o80 endif

o90 if [#<_psng_clearance_z> LE 0]
    (ABORT,TOOLSETTER Z CLEARANCE NOT CONFIGURED)
o90 endif
o91 if [#<_psng_clearance_z> LE #<_psng_latch>]
    (ABORT,TOOLSETTER CLEARANCE Z IS LESS THAN PROBE LATCH)
o91 endif

o100 if [#<_psng_clearance_xy> LE 0]
    (ABORT,TOOLSETTER XY CLEARANCE NOT CONFIGURED)
o100 endif
o101 if [#<_psng_clearance_xy> LE #<_psng_latch>]
    (ABORT,TOOLSETTER CLEARANCE XY IS LESS THAN PROBE LATCH)
o101 endif



o400 if [#<_hal[motion.probe-input]> EQ 1]
    (ABORT,!!! TOOLSETTER ALREADY TRIGGERED OR REMOVED AT CONFIG CHECK !!!)
o400 endif

o<psng_load_var_tool_setter> endsub
M2
